<?xml version='1.0' encoding='utf-8' ?>
<odoo>
    <!-- Action untuk List Tickets Customer - HANYA TREE VIEW -->
    <record id="helpdesk_ticket_list_customer_action" model="ir.actions.act_window">
        <field name="name">My Tickets</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">helpdesk.ticket</field>
        <field name="view_mode">tree</field>
        <field name="view_ids" eval="[(5, 0, 0),
            (0, 0, {'view_mode': 'tree', 'view_id': ref('helpdesk_ticket_view_tree_customer')})]"/>
        <field name="context">{
            'delete': False,
            'search_default_open': 1
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
                No tickets found
            </p>
            <p>
                Your support tickets will appear here once created by our support team.
            </p>
        </field>
    </record>


    <!-- Menu untuk Customer -->
    <menuitem
        id="helpdesk_ticket_customer_main_menu"
        name="Support Tickets"
        sequence="16"
        web_icon="helpdesk_lui,static/description/icon.png"
    />

    <!-- Dashboard Menu untuk Customer -->
    <menuitem
        id="helpdesk_ticket_customer_dashboard_menu"
        name="Dashboard"
        parent="helpdesk_ticket_customer_main_menu"
        action="helpdesk_ticket_dashboard_action"
        sequence="2"
    />

    <!-- Tickets List Menu untuk Customer -->
    <menuitem
        id="helpdesk_ticket_customer_list_menu"
        name="My Tickets"
        parent="helpdesk_ticket_customer_main_menu"
        action="helpdesk_ticket_list_customer_action"
        sequence="1"
    />

    <!-- Tambahan: Update menu existing agar tidak muncul untuk customer -->
    <record id="helpdesk_lui.helpdesk_ticket_main_menu" model="ir.ui.menu">
        <field name="groups_id" eval="[(6, 0, [ref('group_helpdesk_user_own'), ref('group_helpdesk_user'), ref('group_helpdesk_manager')])]"/>
    </record>
</odoo>